<source>
  @type tail
  format ltsv
  tag nginx.access
  path /var/log/nginx/access.log
  pos_file /var/log/td-agent/buffer/access.log.pos
  types request_length:integer,status:integer,request_time:float,bytes_sent:integer,body_bytes_sent:integer,upstream_response_time:integer
</source>
<match nginx.access>
  @type copy
  <store>
    @type stdout
  </store>
  <store>
    @type elasticsearch
    host localhost
    port 9200
    index_name nginx-access
    type_name nginx-access
    logstash_format true
    time_key time
  </store>
</match>


# get uptime
<source>
  @type exec
  format json
  tag uptime
  command /usr/local/rbenv/shims/ruby /root/uptime/uptime.rb
  run_interval 10s
  log_level trace
</source>
<match uptime>
  @type copy
  <store>
    @type stdout
  </store>
  <store>
    @type elasticsearch
    host localhost
    port 9200
    index_name uptime
    type_name uptime
    logstash_format true
    logstash_prefix uptime
  </store>
</match>